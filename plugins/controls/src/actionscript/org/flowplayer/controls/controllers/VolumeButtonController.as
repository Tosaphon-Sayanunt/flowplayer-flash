/* * Author: Thomas Dubois, <thomas _at_ flowplayer org> * This file is part of Flowplayer, http://flowplayer.org * * Copyright (c) 2011 Flowplayer Ltd * * Released under the MIT License: * http://www.opensource.org/licenses/mit-license.php */package org.flowplayer.controls.controllers {        	import org.flowplayer.model.DisplayPluginModel;    	import org.flowplayer.model.DisplayPluginModelImpl;    		import org.flowplayer.controls.Controlbar;	import org.flowplayer.controls.SkinClasses;	import org.flowplayer.model.ClipEvent;	import org.flowplayer.model.PlayerEvent;		import org.flowplayer.ui.controllers.AbstractButtonController;	import org.flowplayer.ui.buttons.ButtonEvent;	import org.flowplayer.view.Flowplayer;	import flash.display.DisplayObjectContainer;	import org.flowplayer.ui.buttons.VolumeTooltipButton;	import org.flowplayer.ui.buttons.TooltipButtonConfig;	import org.flowplayer.ui.buttons.VolumeToggleButton;	import flash.external.*;		import org.flowplayer.ui.dock.Dock;	import org.flowplayer.ui.dock.DockConfig;	import org.flowplayer.controls.volume.VolumeThaiTVSlider;		public class VolumeButtonController extends AbstractButtonController {				private var _volumeDock:Dock;		private var _volumeMenu:VolumeThaiTVSlider;						public function VolumeButtonController( ) {			super();						createVolumeMenu();						ExternalInterface.addCallback("sendVolumeType", volumeSetFromJS);		}				override protected function createWidget():void {						var lowButton:VolumeTooltipButton = new VolumeTooltipButton( 												new lowFaceClass(), 												_config as TooltipButtonConfig, 												_player.animationEngine, _player);            setAccessible(lowButton, "volume-low");																		var mediumButton:VolumeTooltipButton = new VolumeTooltipButton(												new mediumFaceClass(), 												_config as TooltipButtonConfig, 												_player.animationEngine, _player);            setAccessible(mediumButton,  "volume-medium");									var highButton:VolumeTooltipButton = new VolumeTooltipButton(												new highFaceClass(), 												_config as TooltipButtonConfig, 												_player.animationEngine, _player);            setAccessible(highButton,  "volume-high");									var muteButton:VolumeTooltipButton = new VolumeTooltipButton(												new muteFaceClass(), 												_config as TooltipButtonConfig, 												_player.animationEngine, _player);            setAccessible(muteButton,  "volume-mute");						_widget = new VolumeToggleButton(lowButton, mediumButton,highButton,muteButton);					}				override protected function addPlayerListeners():void {			_player.onVolume(onPlayerVolumeEvent);		}				private function onPlayerVolumeEvent(event:PlayerEvent):void {			var volValue:Number = event.info as Number;			if(volValue == 0) {				(_widget as VolumeToggleButton).volumeType = 0;			} else if(volValue < 31) {				(_widget as VolumeToggleButton).volumeType = 1;			} else if(volValue < 61) {				(_widget as VolumeToggleButton).volumeType = 2;			} else {				(_widget as VolumeToggleButton).volumeType = 3;			}					}				override public function get name():String {			return "Volume";		}				override public function get defaults():Object {			return {				tooltipEnabled: false,				tooltipLabel: "Volume",				visible: true,				enabled: true			};		}		public function get lowFaceClass():Class {			return SkinClasses.getClass("fp.VolumeLowButton");		}				public function get mediumFaceClass():Class {			return SkinClasses.getClass("fp.VolumeMediumButton");		}				public function get highFaceClass():Class {			return SkinClasses.getClass("fp.VolumeHighButton");		}				public function get muteFaceClass():Class {			return SkinClasses.getClass("fp.VolumeMuteButton");		}				override protected function onButtonClicked(event:ButtonEvent):void {			//ExternalInterface.call("thaitv.thaiTVVolumeMute");					}				private function volumeSetFromJS(volumeType:Number):void {            (_widget as VolumeToggleButton).volumeType = volumeType;        }                private function createVolumeMenu():void {        		_volumeMenu = new VolumeThaiTVSlider(_player,this);            		var config:DockConfig = new DockConfig();            config.horizontal = true;            config.scaleWidthAndHeight = true;            var model:DisplayPluginModel = new DisplayPluginModelImpl(null, Dock.DOCK_PLUGIN_NAME, false);            model.height = 20 + "%";            model.left =  15;            model.top =  15;            config.model = model;                    		_volumeDock = new Dock(_player, config);//            _volumeDock.config.scaleWidthAndHeight = true;            _volumeDock.addIcon(_volumeMenu);            //_player.onLoad(function(event:PlayerEvent):void {            		log.debug("VolumeButtonController  before add to panel");                _volumeDock.addToPanel();                log.debug("VolumeButtonController  after add to panel");            //});
        }	}}